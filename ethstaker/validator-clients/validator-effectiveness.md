# Validator effectiveness

Validator effectiveness can be thought of as how useful an [attestation](../staking-glossary.md#attestation) is to the network, considering both [block production](../staking-glossary.md#block-proposer) and [inclusion distance](../staking-glossary.md#inclusion-distance).

## Attestation Inclusion Process

How are attestations included on the Ethereum network? The process is roughly as follows:

> This is a simplified view of attesting, but can be a useful starting point.

1. Every attesting validator generates an [attestation](../staking-glossary.md#attestation) with the data it has available about the state of the chain.
2. The attestation is propagated around the Ethereum network to relevant [aggregators](../staking-glossary.md#attestation-aggregator).
3. Every relevant aggregator that receives the attestation aggregates it with other attestations that have the same claims.
4. The aggregated attestation is propagated around the Ethereum network to all nodes.
5. Any validator that is proposing a block and has yet to see the aggregated attestation on the chain adds the aggregated attestation to the block.

Whenever an attestation has an inclusion distance greater than 1 it is important to understand why. There are a number of possible reasons:

### Attestation Generation Delay

A validator may have problems that result in delayed attestation generation. For example, it may have out-of-date information regarding the state of the chain, or the validator may be underpowered and take a significant amount of time to generate and sign the attestation. Regardless of the reason, a delayed attestation has a potential knock-on effect for the rest of the steps in the process.

### Attestation Propagation Delay

Once an attestation has been generated by a validator it needs to propagate across the network to the aggregators. The nature of this process means that early propagation is critical to ensure that it is received by an aggregator in time for integration into the aggregated attestation before broadcasting. Validators should attempt to ensure they are connected to enough varied peers to ensure fast propagation to aggregators.

### Aggregate Generation Delay

An aggregator can delay the attestation aggregation process. Most commonly this is because the node is already overloaded by generating attestations, but the speed of the aggregation algorithm can also cause significant delays when there is a large number of validators that need to be aggregated.

### Aggregate Propagation Delay

Similar to attestation propagation delay, the aggregation attestation needs to make its way around the network and can suffer the same delays.

### Block Production Failure

For an attestation to become part of the chain it needs to be included in a block. However, block production is not guaranteed. A block may not be produced because a validator is offline, or is out of sync with the rest of the network and so produces a block with invalid data that is rejected by the chain. Without a block there is no way to include the attestation in the chain at that slot, resulting in a higher than optimal inclusion distance.

Block production failure has a second impact, which is that it increases the total number of attestations that are eligible for inclusion in the next block that is produced. If there are more attestations available than can fit in a block the producer is likely to include the attestations that return the highest reward, which will be those with the lowest inclusion distance. This can result in attestations that miss their optimal block also missing subsequent blocks due to being less and less attractive to include.

The fact that block production is out of the validator’s control (except for those the validator itself produces) requires the definition of the term earliest inclusion slot, where the earliest inclusion slot is the first slot greater than the attestation slot in which a valid block is produced. This takes in to account the fact that attestations cannot be included in blocks that do not exist, and is no reflection on the effectiveness of the validator.

## Malicious Activity

It is possible for a malicious actor to refuse to include any given attestations in their aggregates, or to refuse to include attestations in their blocks. The former is mitigated by having multiple aggregators for each attestation group, and the latter by the cost of excluding an aggregated attestation. Ultimately, however, if the cost of excluding an attestation from a block is compensated for monetarily, or is considered to have a higher value politically, there is nothing an attesting validator can do to force inclusion by a block-producing validator.

## Calculating Attestation Effectiveness

Attestation effectiveness can be thought of as how useful an attestation is to the network, considering both block production and inclusion distance. It is formally defined as:

> (earliest inclusion slot - attestation slot) / (actual inclusion slot - attestation slot)

Effectiveness is represented as a percentage value. An attestation that fails to be included with the maximum inclusion distance of 32 is considered to have an effectiveness of 0. Here are some example effectiveness calculations:

| Attestation slot | Earliest inclusion slot | Actual inclusion slot | Effectiveness |
| ---------------- | ----------------------- | --------------------- | ------------- |
| 5                | 6                       | 6                     | 100%          |
| 5                | 6                       | 7                     | 50%           |
| 5                | 6                       | 8                     | 33.3%         |
| 5                | 7                       | 7                     | 100%          |
| 5                | 7                       | 8                     | 66.7%         |
| 5                | 7                       | 9                     | 50%           |

## Aggregate Attestation Effectiveness

Attestation effectiveness for a single attestation is interesting but not very useful by itself. Aggregating effectiveness over multiple attestations, both over time and multiple validators, gives a better view of the overall effectiveness of a group of validators. Aggregate effectiveness can be calculated as a simple average of individual attestation effectiveness, for example a 7-day trailing average across all validators in a given group.

[_**Source ↗**_](https://www.attestant.io/posts/defining-attestation-effectiveness/)
